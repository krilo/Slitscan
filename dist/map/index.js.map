{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/js/index.js","src/js/slitscan/SlitscanApp.js"],"names":[],"mappings":"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","file":"index.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","'use strict'\n\nimport SlitscanApp from './slitscan/SlitscanApp';\n\n(function(){\n  const App = new SlitscanApp({el: document.querySelector('#app')})\n})()\n","class SlitscanApp {\n  constructor(options){\n    this.el = options.el;\n\n    // Add Events\n    this.initScene()\n    this.resize()\n\n  }\n\n  initScene(){\n\n    this.camera = new THREE.Camera( )\n    this.camera.position.z = 1\n    this.scene = new THREE.Scene();\n\n    // Buffer\n    let buffers = []\n    let currentBuffer = 0;\n    let numBuffers = 10;\n    let bufferContainer = document.querySelector('.buffers-container')\n    let bufferWidth = 50\n    let bufferHeight = 50\n\n    const getTexture = (canvas) => {\n      let image = new Image();\n      image.src = canvas.toDataURL('image/png');\n      let texture = new THREE.Texture();\n      texture.image = image;\n      texture.magFilter = THREE.LinearFilter;\n      texture.minFilter = THREE.LinearFilter;\n\n      image.onload = () => {\n        texture.needsUpdate = true;\n      };\n\n      return texture\n    }\n\n    let addedGradient = false\n    const getMask = (start, stop) => {\n      let canvas = document.querySelector('#mask') || document.createElement('canvas')\n      canvas.setAttribute('id', 'mask')\n      canvas.width = bufferWidth\n      canvas.height = bufferHeight\n      let ctx = canvas.getContext('2d')\n\n      let grad= ctx.createLinearGradient(0, 0, bufferWidth, 0);\n      grad.addColorStop(start, \"#000\");\n      grad.addColorStop(stop, \"#FFF\");\n\n      ctx.fillStyle = grad;\n      ctx.fillRect(0, 0, bufferWidth, bufferHeight)\n      if(!addedGradient){\n        addedGradient = true;\n        bufferContainer.appendChild(canvas)\n      }\n      return canvas;\n    }\n\n    /**\n     * Create Buffers\n     */\n\n    for (var i = 0; i < numBuffers; i++) {\n      let canvas = document.createElement('canvas')\n      canvas.width = bufferWidth\n      canvas.height = bufferHeight\n      let ctx = canvas.getContext('2d')\n      ctx.fillStyle = `rgb(${Math.floor(255-25.5*i)}, ${Math.floor(255-25.5*i)}, 255)`;\n      ctx.fillRect(0, 0, bufferWidth, bufferHeight)\n      buffers[i] = canvas;\n      bufferContainer.appendChild(canvas)\n    }\n\n    /**\n     * Create Mask\n     */\n    let maskIndex = 0;\n    let maskCanvas = getMask(0,1)\n\n    this.renderer = new THREE.WebGLRenderer( { alpha: true, antialias: true })\n    this.renderer.sortObjects = false;\n\n    this.renderer.setPixelRatio(window.devicePixelRatio)\n    this.renderer.setSize( 800, 600 );\n\n    this.renderer.domElement.setAttribute('id', 'binorycanvas')\n    this.renderer.domElement.setAttribute('binory-canvas', '')\n    this.el.appendChild(this.renderer.domElement)\n\n    let bufferArray = []\n    for (var i = 0; i < buffers.length; i++) {\n      bufferArray[i] = getTexture(buffers[i])\n    }\n\n    let geometry = new THREE.PlaneBufferGeometry(2, 2)\n    let uniforms = {\n      time:             { type: \"f\", value: 1.0 },\n      resolution:       { type: \"v2\", value: new THREE.Vector2(800, 600) },\n      mask:             { type: \"t\", value: getTexture(maskCanvas)},\n      numBuffers:       { type: \"f\", value: numBuffers},\n      bufferArray:      { type: \"tv\", value: bufferArray}\n    }\n\n    let vertexShader = `\n      void main()\t{\n        gl_Position = vec4( position, 1.0 );\n      }`;\n\n    let fragmentShaderIfstatement = '';\n    for (var i = 0; i < numBuffers; i++) {\n      if(i == 0){\n          fragmentShaderIfstatement += `if(arrayIndex == ${i}.){\n            bufferPixel = texture2D(bufferArray[${i}], p);\n          }`\n      } else {\n        fragmentShaderIfstatement += `else if(arrayIndex == ${i}.){\n          bufferPixel = texture2D(bufferArray[${i}], p);\n        }`\n      }\n    }\n\n    let fragmentShader = `\n      uniform float time;\n      uniform float numBuffers;\n      uniform vec2 resolution;\n\n      uniform sampler2D mask;\n      uniform sampler2D bufferArray[${numBuffers}];\n\n      vec4 drawPixel (vec2 p) {\n        vec4 maskPixel = texture2D(mask, p);\n        float brightness = distance(maskPixel, vec4(0.0, 0.0, 0.0, 1.0));\n        float arrayIndex = floor((brightness/2.)*numBuffers);\n        vec4 bufferPixel;\n\n        ${fragmentShaderIfstatement}\n\n        return bufferPixel;\n      }\n\n      void main() {\n        vec2 p = ( gl_FragCoord.xy / resolution.xy );\n        gl_FragColor = drawPixel(p);\n      }`;\n\n    let material = new THREE.ShaderMaterial( {\n      uniforms: uniforms,\n      vertexShader: vertexShader,\n      fragmentShader: fragmentShader\n    });\n\n    let mesh = new THREE.Mesh(geometry, material)\n    this.scene.add(mesh)\n\n    const render = () => {\n\n      maskIndex++;\n      if(maskIndex > 100){\n        maskIndex = 0;\n      }\n      maskCanvas = getMask(maskIndex/100,1)\n      let maskTexture = getTexture(maskCanvas);\n      maskTexture.needsUpdate = true\n\n      uniforms.time.value += 0.005;\n      uniforms.mask.value = maskTexture\n\n      this.renderer.render( this.scene, this.camera );\n      requestAnimationFrame( render.bind(this) );\n    }\n\n    render()\n  }\n\n\n  resize(){\n    //this.el.width = window.innerWidth;\n    //this.el.height = window.innerHeight;\n    //this.renderer.setSize( this.el.offsetWidth, this.el.offsetHeight );\n  }\n}\n\nmodule.exports = SlitscanApp;\n"]}